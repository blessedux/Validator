(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1954:function(e,t,n){Promise.resolve().then(n.bind(n,4097))},4097:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(4964),o=n(8232),i=n(5646),a=n.n(i),l=n(9988),s=n(200),c=n(9400),u=n(9542),d=o.createElement,f=new Set;function p(e){var t=e.url,n=e.className,i=e.placeholderImage,l=void 0===i?"/images/FLOWCARD + COINS - Clonable@1-1512x869.webp":i,s=e.onLoad,p=e.onError,h=(e.loadingDelay,e.fallbackContent),v=(0,o.useState)(!0),g=(v[0],v[1]),m=(0,o.useState)(!1),y=m[0],w=m[1],b=(0,o.useState)(!1),x=b[0],S=b[1],k=(0,o.useState)(!0),E=k[0],N=k[1],C=(0,o.useState)(!1),O=C[0],D=C[1],A=(0,o.useRef)(null),_=(0,o.useRef)(void 0),j=(0,o.useRef)(!1),L=(0,o.useRef)(null),z=(0,o.useRef)(!1),P=(0,o.useCallback)(function(){L.current&&(f.delete(L.current),L.current=null),A.current&&(A.current.innerHTML=""),z.current=!1,_.current&&clearTimeout(_.current)},[]),R=(0,o.useCallback)(function(){return new Promise(function(e,t){console.log("Starting Spline script loading...");var n=document.querySelector('script[src*="spline-viewer"]');n&&(console.log("Removing existing Spline script..."),n.remove(),j.current=!1),console.log("Creating new Spline script element...");var r=document.createElement("script"),o=Date.now();r.src="https://unpkg.com/@splinetool/viewer/build/spline-viewer.js?v=".concat(o),r.type="module",r.async=!0;var i=setTimeout(function(){console.error("Script load timeout"),t(Error("Script load timeout"))},1e4);r.onload=function(){clearTimeout(i),console.log("Spline script loaded successfully"),j.current=!0,e()},r.onerror=function(e){clearTimeout(i),console.error("Failed to load Spline viewer script:",e),t(Error("Failed to load Spline viewer script"))},console.log("Appending script to document head..."),document.head.appendChild(r)})},[]),T=(0,o.useCallback)(function(){if(!A.current||z.current)return console.log("Spline container not ready or already initialized"),!1;if(!customElements.get("spline-viewer"))return console.log("Spline viewer custom element not available"),!1;P();try{var e=document.createElement("spline-viewer"),n=Date.now(),r="".concat(t).concat(t.includes("?")?"&":"?","v=").concat(n);return e.setAttribute("url",r),e.style.width="100%",e.style.height="100%",e.style.border="none",e.style.background="transparent",e.style.minWidth="100px",e.style.minHeight="100px",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex="0",e.style.pointerEvents="auto",e.style.userSelect="none",e.style.touchAction="manipulation",e.style.opacity="0",e.style.transition="opacity 0.5s ease-in-out",e.addEventListener("load",function(){console.log("Spline viewer loaded successfully"),L.current=e,f.add(e),w(!0),g(!1),O&&(e.style.opacity="1",setTimeout(function(){N(!1)},500)),null==s||s()}),e.addEventListener("error",function(e){console.error("Spline viewer error:",e),S(!0),g(!1),null==p||p(e)}),A.current.appendChild(e),z.current=!0,!0}catch(e){return console.error("Error creating Spline viewer:",e),S(!0),g(!1),null==p||p(e),!1}},[t,s,p,P]);return(0,o.useEffect)(function(){var e;return(e=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:T(),e.next=12;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to initialize Spline:",e.t0),S(!0),g(!1),null==p||p(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return e.apply(this,arguments)})(),function(){P()}},[R,T,P]),d("div",{className:(0,u.cn)("relative w-full h-full",n)},E&&l&&d("div",{className:"absolute inset-0 z-10 transition-opacity duration-500",style:{opacity:O?1:0}},d(c.default,{src:l,alt:"Loading placeholder",layout:"fill",objectFit:"cover",priority:!0,onLoadingComplete:function(){D(!0),y&&L.current&&(L.current.style.opacity="1",setTimeout(function(){N(!1)},500))}})),d("div",{ref:A,className:"relative w-full h-full",style:{minHeight:"100px"}}),x&&h&&d("div",{className:"absolute inset-0 z-20 flex items-center justify-center"},h))}var h=n(8788),v=n(6022),g=n(4675),m=n(2702),y=n(4762);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,y.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=new(function(){function e(){(0,g.Z)(this,e),(0,y.Z)(this,"state",{isConnected:!1,isAuthenticated:!1,publicKey:null,walletType:null,isConnecting:!1,isAuthenticating:!1}),(0,y.Z)(this,"listeners",new Set)}return(0,m.Z)(e,[{key:"getState",value:function(){return b({},this.state)}},{key:"setState",value:function(e){this.state=b(b({},this.state),e),this.notifyListeners()}},{key:"connect",value:function(e,t){this.setState({isConnected:!0,publicKey:e,walletType:t,isConnecting:!1})}},{key:"authenticate",value:function(){this.setState({isAuthenticated:!0,isAuthenticating:!1})}},{key:"disconnect",value:function(){this.setState({isConnected:!1,isAuthenticated:!1,publicKey:null,walletType:null,isConnecting:!1,isAuthenticating:!1})}},{key:"setConnecting",value:function(e){this.setState({isConnecting:e})}},{key:"setAuthenticating",value:function(e){this.setState({isAuthenticating:e})}},{key:"subscribe",value:function(e){var t=this;return this.listeners.add(e),function(){t.listeners.delete(e)}}},{key:"notifyListeners",value:function(){var e=this;this.listeners.forEach(function(t){try{t(e.getState())}catch(e){console.error("Error in wallet state listener:",e)}})}}]),e}()),S=n(1839),k=n(4504),E=o.createElement;function N(){localStorage.clear(),sessionStorage.clear(),window.dispatchEvent(new Event("walletStateChange"))}function C(){var e=(0,k.F)().theme,t=(0,o.useState)({x:0,y:0}),n=t[0],i=t[1],c=(0,o.useState)(0),u=c[0],d=c[1],f=(0,o.useState)(!1),g=(f[0],f[1]),m=(0,o.useState)(!1),y=m[0],w=m[1],b=(0,o.useRef)(!1),C=(0,o.useRef)(!1),O=(0,o.useRef)(!1),D=(0,o.useRef)(0),A=(0,l.useRouter)();return(0,o.useEffect)(function(){var e=function(e){var t=e.clientX,n=e.clientY,r=window;i({x:t/r.innerWidth*2-1,y:n/r.innerHeight*2-1})},t=function(){var e=Math.min(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100,100);d(e);var t=document.querySelector("spline-viewer");if(t){var n,r=t.splineRuntimeRef;r&&(null===(n=r.setScrollValue)||void 0===n||n.call(r,e/100))}};return window.addEventListener("mousemove",e),window.addEventListener("scroll",t),function(){window.removeEventListener("mousemove",e),window.removeEventListener("scroll",t)}},[]),(0,o.useEffect)(function(){var e,t=(e=(0,r.Z)(a().mark(function e(){var t,n,r,o,i,l,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\uD83D\uDD0D Starting profile check..."),!O.current){e.next=4;break}return console.log("⏳ Already checking profile, skipping"),e.abrupt("return");case 4:if(!b.current){e.next=7;break}return console.log("⏳ Already redirected, skipping"),e.abrupt("return");case 7:if(!((t=Date.now())-D.current<2e3)){e.next=11;break}return console.log("⏳ Too soon since last check, skipping"),e.abrupt("return");case 11:if(D.current=t,(0,h.$8)()){e.next=15;break}return console.log("❌ Not authenticated, skipping"),e.abrupt("return");case 15:if(null!=(n=(0,h.bW)())&&n.token){e.next=19;break}return console.log("❌ No auth token, skipping"),e.abrupt("return");case 19:if(function(e){try{var t=e.split(".");if(3!==t.length)return!1;var n=JSON.parse(atob(t[1])),r=Math.floor(Date.now()/1e3);return n.exp>r}catch(e){return!1}}(n.token)){e.next=23;break}return console.log("❌ Invalid JWT, clearing storage"),N(),e.abrupt("return");case 23:return console.log("✅ Authentication valid, checking profile..."),O.current=!0,w(!0),e.prev=26,e.next=29,v.E.getProfile();case 29:e.sent,console.log("✅ Profile found, redirecting to dashboard"),b.current=!0,A.push("/dashboard"),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(26),console.log("\uD83D\uDD0D Profile check error:",e.t0.message),null!==(r=e.t0.message)&&void 0!==r&&r.includes("404")||null!==(o=e.t0.message)&&void 0!==o&&o.includes("Profile not found")||null!==(i=e.t0.message)&&void 0!==i&&i.includes("Endpoint not found")?(console.log("❌ Profile not found, redirecting to profile creation"),b.current=!0,A.push("/profile")):null!==(l=e.t0.message)&&void 0!==l&&l.includes("401")||null!==(s=e.t0.message)&&void 0!==s&&s.includes("Authentication")?(console.log("❌ Authentication failed, clearing storage"),N()):(console.error("❌ Unexpected error checking user profile:",e.t0),b.current=!0,A.push("/profile"));case 39:return e.prev=39,O.current=!1,w(!1),e.finish(39);case 43:case"end":return e.stop()}},e,null,[[26,35,39,43]])})),function(){return e.apply(this,arguments)}),n=function(){b.current=!1,(0,h.$8)()?t():b.current=!1},o=x.subscribe(function(e){e.isAuthenticated&&(0,h.$8)()?(b.current=!1,t()):b.current=!1});return(0,h.$8)()&&window.addEventListener("walletStateChange",n),(0,h.$8)()&&!C.current&&(C.current=!0,setTimeout(function(){t()},100)),function(){o(),window.removeEventListener("walletStateChange",n)}},[A]),E("div",{className:"relative w-full",style:{height:"160vh"}},y&&E("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60"},E("div",{className:"text-white text-lg font-semibold animate-pulse"},"Checking authentication...")),E(S.StarsBackground,{className:"fixed inset-0 -z-20"}),E("div",{className:"fixed inset-0 -z-10 overflow-hidden"},E("div",{className:"absolute inset-0",style:{transform:"scale(1.2) translate(".concat(20*n.x,"px, ").concat(20*n.y,"px) translateY(").concat(-u,"px)"),transformOrigin:"center",transition:"transform 0.3s ease-out",width:"100%",height:"100%"}},E(p,{url:"https://prod.spline.design/Bfe9XFwx9BFcwE6l/scene.splinecode",className:"w-full h-full",placeholderImage:"/images/FLOWCARD + COINS - Clonable@1-1512x869.webp",onLoad:function(){return g(!0)},onError:function(e){return console.error("Spline failed to load:",e)}}))),E("div",{className:"fixed top-0 left-0 right-0 z-10 flex flex-col items-center justify-center h-screen px-4"},E("div",{className:"max-w-2xl mx-auto space-y-8"},E("h1",{className:"text-4xl font-bold tracking-tight text-white sm:text-5xl"},"DOB Validator"),E("p",{className:"text-xl text-gray-300"},"Connect your wallet to begin your device validation and get investment-ready on our RWA platform."),E("div",{className:"mt-8"},E(s.U,null)),E("p",{className:"mt-6 text-sm text-gray-400"},"Submit your documentation and unlock new funding opportunities."))),E("footer",{className:"fixed bottom-0 left-0 right-0 z-10 p-4 text-center transition-colors duration-200",style:{backgroundColor:"dark"===e?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.8)",color:"dark"===e?"#fff":"#000"}},E("p",{className:"text-sm"},"\xa9 2024 DOB Protocol. All rights reserved.")))}},1839:function(e,t,n){"use strict";n.d(t,{StarsBackground:function(){return h}});var r=n(7932),o=n(3368),i=n(6158),a=n(8232),l=n(9438),s=n(4504),c=n(9542),u=["count","size","duration","starColor","className"],d=["children","className"],f=a.createElement;function p(e){var t=e.count,n=void 0===t?1e3:t,s=e.size,d=void 0===s?1:s,p=e.duration,h=e.starColor,v=void 0===h?"#fff":h,g=e.className,m=(0,i.Z)(e,u),y=a.useState(""),w=(0,o.Z)(y,2),b=w[0],x=w[1];return a.useEffect(function(){x(function(e,t){for(var n=[],r=0;r<e;r++){var o=Math.floor(4e3*Math.random())-2e3,i=Math.floor(4e3*Math.random())-2e3;n.push("".concat(o,"px ").concat(i,"px ").concat(t))}return n.join(", ")}(n,v))},[n,v]),f(l.E.div,(0,r.Z)({animate:{y:[0,-2e3]},transition:{repeat:1/0,duration:void 0===p?50:p,ease:"linear"},className:(0,c.cn)("absolute top-0 left-0 w-full h-[2000px]",g)},m),f("div",{className:"absolute bg-transparent rounded-full",style:{width:"".concat(d,"px"),height:"".concat(d,"px"),boxShadow:b}}),f("div",{className:"absolute bg-transparent rounded-full top-[2000px]",style:{width:"".concat(d,"px"),height:"".concat(d,"px"),boxShadow:b}}))}function h(e){var t=e.children,n=e.className,l=(0,i.Z)(e,d),u=(0,s.F)().theme,h=a.useState(!1),v=(0,o.Z)(h,2),g=v[0],m=v[1];if(a.useEffect(function(){m(!0)},[]),!g)return null;var y="dark"===u,w=y?"#fff":"#000";return f("div",(0,r.Z)({className:(0,c.cn)("relative size-full overflow-hidden",y?"bg-[radial-gradient(ellipse_at_bottom,_#262626_0%,_#000_100%)]":"bg-[radial-gradient(ellipse_at_bottom,_#f8fafc_0%,_#ffffff_100%)]",n)},l),f(p,{count:1e3,size:1,duration:50,starColor:w}),f(p,{count:400,size:2,duration:100,starColor:w}),f(p,{count:200,size:3,duration:150,starColor:w}),t)}}},function(e){e.O(0,[650,144,33,219,400,735,537,788,200,638,333,744],function(){return e(e.s=1954)}),_N_E=e.O()}]);