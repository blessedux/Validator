(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{8019:function(e,t,a){Promise.resolve().then(a.bind(a,2849))},2849:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return e2}});var r=a(8232),n=a(4964),o=a(4762),c=a(5646),i=a.n(c),s=a(4404),l=a(4262),u=r.createElement;function d(e){var t=e.title,a=e.description,r=e.children,n=e.onClose,o=e.showCloseButton;return u("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50"},u("div",{className:"bg-[#6366F1] text-white rounded-lg w-full max-w-md p-6 relative"},(void 0===o||o)&&u(l.z,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 text-white hover:bg-[#5355d1] hover:text-white",onClick:n},u(s.Z,{size:18})),u("div",{className:"flex items-center mb-4"},u("img",{src:"/images/dob-logo.png",alt:"DOB Logo",className:"w-10 h-10 mr-4"}),u("div",null,u("h2",{className:"text-xl font-medium"},t),a&&u("p",{className:"text-sm text-white/80 mt-1"},a))),r))}var m=r.createElement;function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];function h(e){var t=e.isActive,a=e.onComplete,n=e.x,o=e.y,c=(0,r.useState)([]),i=c[0],s=c[1],l=(0,r.useState)(!1),u=l[0],d=l[1];return((0,r.useEffect)(function(){if(t&&!u){d(!0),s(Array.from({length:50},function(e,t){return{id:t,x:n,y:o,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,color:v[Math.floor(Math.random()*v.length)],size:4*Math.random()+2,opacity:1}}));var e=setInterval(function(){s(function(e){var t=e.map(function(e){return p(p({},e),{},{x:e.x+e.vx,y:e.y+e.vy,vy:e.vy+.2,opacity:e.opacity-.02})}).filter(function(e){return e.opacity>0});return 0===t.length?(d(!1),a(),[]):t})},16);return function(){return clearInterval(e)}}},[t,u,n,o,a]),t&&0!==i.length)?m("div",{className:"fixed inset-0 pointer-events-none z-[60]"},i.map(function(e){return m("div",{key:e.id,className:"absolute rounded-sm",style:{left:e.x,top:e.y,width:e.size,height:e.size,backgroundColor:e.color,opacity:e.opacity,transform:"translate(-50%, -50%)",transition:"none"}})})):null}var b=a(7932),g=a(6158),y=a(9542),N=["className","type"],x=r.createElement,w=r.forwardRef(function(e,t){var a=e.className,r=e.type,n=(0,g.Z)(e,N);return x("input",(0,b.Z)({type:r,className:(0,y.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t},n))});w.displayName="Input";var D=a(5863),O=a(8857),S=["className"],C=r.createElement,P=(0,O.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),k=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,S);return C(D.f,(0,b.Z)({ref:t,className:(0,y.cn)(P(),a)},r))});k.displayName=D.f.displayName;var j=a(4403),E=a(1571),T=a(6470),I=a(7942),R=["className","children"],Z=["className"],M=["className"],F=["className","children","position"],A=["className"],V=["className","children"],z=["className"],B=r.createElement,L=j.fC;j.ZA;var _=j.B4,U=r.forwardRef(function(e,t){var a=e.className,r=e.children,n=(0,g.Z)(e,R);return B(j.xz,(0,b.Z)({ref:t,className:(0,y.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},n),r,B(j.JO,{asChild:!0},B(E.Z,{className:"h-4 w-4 opacity-50"})))});U.displayName=j.xz.displayName;var q=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,Z);return B(j.u_,(0,b.Z)({ref:t,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",a)},r),B(T.Z,{className:"h-4 w-4"}))});q.displayName=j.u_.displayName;var Y=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,M);return B(j.$G,(0,b.Z)({ref:t,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",a)},r),B(E.Z,{className:"h-4 w-4"}))});Y.displayName=j.$G.displayName;var W=r.forwardRef(function(e,t){var a=e.className,r=e.children,n=e.position,o=void 0===n?"popper":n,c=(0,g.Z)(e,F);return B(j.h_,null,B(j.VY,(0,b.Z)({ref:t,className:(0,y.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:o},c),B(q,null),B(j.l_,{className:(0,y.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")},r),B(Y,null)))});W.displayName=j.VY.displayName,r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,A);return B(j.__,(0,b.Z)({ref:t,className:(0,y.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},r))}).displayName=j.__.displayName;var G=r.forwardRef(function(e,t){var a=e.className,r=e.children,n=(0,g.Z)(e,V);return B(j.ck,(0,b.Z)({ref:t,className:(0,y.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},n),B("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},B(j.wU,null,B(I.Z,{className:"h-4 w-4"}))),B(j.eT,null,r))});G.displayName=j.ck.displayName,r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,z);return B(j.Z0,(0,b.Z)({ref:t,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=j.Z0.displayName;var J={hasSeenModal:function(e){return!!sessionStorage.getItem(e)},markModalAsSeen:function(e){sessionStorage.setItem(e,"true")}},H={WELCOME:"dob-welcome-modal-seen",SUCCESS:"dob-success-modal-seen"},$=["className"],X=["className"],K=["className"],Q=["className"],ee=["className"],et=["className"],ea=r.createElement,er=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,$);return ea("div",(0,b.Z)({ref:t,className:(0,y.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a)},r))});er.displayName="Card";var en=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,X);return ea("div",(0,b.Z)({ref:t,className:(0,y.cn)("flex flex-col space-y-1.5 p-6",a)},r))});en.displayName="CardHeader";var eo=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,K);return ea("div",(0,b.Z)({ref:t,className:(0,y.cn)("text-2xl font-semibold leading-none tracking-tight",a)},r))});eo.displayName="CardTitle";var ec=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,Q);return ea("div",(0,b.Z)({ref:t,className:(0,y.cn)("text-sm text-muted-foreground",a)},r))});ec.displayName="CardDescription";var ei=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,ee);return ea("div",(0,b.Z)({ref:t,className:(0,y.cn)("p-6 pt-0",a)},r))});ei.displayName="CardContent",r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,et);return ea("div",(0,b.Z)({ref:t,className:(0,y.cn)("flex items-center p-6 pt-0",a)},r))}).displayName="CardFooter";var es=a(41),el=a(6342),eu=a(16),ed=r.createElement;function em(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ef(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?em(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):em(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ep(e){var t,a=e.deviceData,c=e.updateDeviceData,s=e.onNext,u=e.onBack;e.onSaveDraft,e.onAutoSave;var m=(0,r.useState)(!1),f=m[0],p=m[1],v=(0,r.useState)(!1),b=v[0],g=v[1],y=(0,r.useState)({x:0,y:0}),N=y[0],x=y[1],D=(0,r.useState)({}),O=D[0],S=D[1],C=(0,r.useState)(!1);C[0],C[1];var P=(0,r.useRef)(null);(0,eu.pm)().toast;var j=(0,r.useState)({deviceName:a.deviceName||"",deviceType:a.deviceType||"",customDeviceType:a.customDeviceType||"",location:a.location||""}),E=j[0],T=j[1];(0,r.useEffect)(function(){T({deviceName:a.deviceName||"",deviceType:a.deviceType||"",customDeviceType:a.customDeviceType||"",location:a.location||""})},[a.draftId]),(0,r.useEffect)(function(){J.hasSeenModal(H.WELCOME)||p(!0)},[]);var I=function(e,t){console.log("\uD83D\uDD0D Input change:",e,t),T(function(a){return ef(ef({},a),{},(0,o.Z)({},e,t))})},R=function(){var e={};return(!E.deviceName||E.deviceName.length<2)&&(e.deviceName="Device name is required (min 2 chars)"),(!E.deviceType||E.deviceType.length<2)&&(e.deviceType="Device type is required (min 2 chars)"),(!E.location||E.location.length<2)&&(e.location="Location is required (min 2 chars)"),S(e),0===Object.keys(e).length},Z=(t=(0,n.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),R()&&(c(E),s());case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),M=function(){if(J.markModalAsSeen(H.WELCOME),P.current){var e=P.current.getBoundingClientRect();x({x:e.left+e.width/2,y:e.top+e.height/2})}p(!1),g(!0)};return ed(r.Fragment,null,f&&ed("div",{ref:P},ed(d,{title:"Device Verification",description:"Let's verify your device to create an investment pool and tokenize its future revenue.",onClose:M},ed("p",{className:"mb-6"},"We'll guide you through the process of verifying your device's technical and financial information. This helps investors trust your pool and ensures transparency."),ed("div",{className:"flex justify-end"},ed(l.z,{className:"bg-[#6366F1] text-white hover:bg-[#5355d1]",onClick:M},"Get Started")))),ed(h,{isActive:b,onComplete:function(){g(!1)},x:N.x,y:N.y}),ed(er,{className:"w-full max-w-2xl mx-auto bg-white/5 backdrop-blur-xl border-white/10"},ed(en,{className:"text-center"},ed(eo,{className:"text-2xl font-bold text-white mb-2"},"Device Basic Information"),ed(ec,{className:"text-gray-300"},"Please provide the basic details about your device")),ed(ei,null,ed("form",{onSubmit:Z,className:"space-y-6"},ed("div",{className:"space-y-4"},ed("div",null,ed(k,{htmlFor:"deviceName"},"Device Name"),ed(w,{id:"deviceName",value:E.deviceName,onChange:function(e){return I("deviceName",e.target.value)},placeholder:"Enter device name",className:"form-input"}),O.deviceName&&ed("p",{className:"text-red-500 text-sm mt-1"},O.deviceName)),ed("div",null,ed(k,{htmlFor:"deviceType"},"Device Type"),ed(L,{value:E.deviceType,onValueChange:function(e){return I("deviceType",e)}},ed(U,{id:"deviceType",className:"form-select"},ed(_,{placeholder:"Select device type"})),ed(W,null,ed(G,{value:"solar-panel"},"Solar Panel"),ed(G,{value:"wind-turbine"},"Wind Turbine"),ed(G,{value:"battery-storage"},"Battery Storage"),ed(G,{value:"hydro-generator"},"Hydro Generator"),ed(G,{value:"geothermal"},"Geothermal"),ed(G,{value:"biomass"},"Biomass"),ed(G,{value:"other"},"Other"))),O.deviceType&&ed("p",{className:"text-red-500 text-sm mt-1"},O.deviceType)),"other"===E.deviceType&&ed("div",null,ed(k,{htmlFor:"customDeviceType"},"Custom Device Type"),ed(w,{id:"customDeviceType",value:E.customDeviceType,onChange:function(e){return I("customDeviceType",e.target.value)},placeholder:"Specify custom device type",className:"form-input"})),ed("div",null,ed(k,{htmlFor:"location"},"Location"),ed(w,{id:"location",value:E.location,onChange:function(e){return I("location",e.target.value)},placeholder:"Enter device location",className:"form-input"}),O.location&&ed("p",{className:"text-red-500 text-sm mt-1"},O.location))),ed("div",{className:"flex justify-between pt-6"},ed(l.z,{type:"button",variant:"outline",onClick:u,className:"flex items-center gap-2"},ed(es.Z,{className:"h-4 w-4"}),"Back"),ed(l.z,{type:"submit",className:"flex items-center gap-2 ml-auto"},"Next",ed(el.Z,{className:"h-4 w-4"})))))))}var ev=["className"],eh=r.createElement,eb=r.forwardRef(function(e,t){var a=e.className,r=(0,g.Z)(e,ev);return eh("textarea",(0,b.Z)({className:(0,y.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t},r))});eb.displayName="Textarea";var eg=r.createElement;function ey(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eN(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ey(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ex(e){var t,a=e.deviceData,c=e.updateDeviceData,s=e.onNext,u=e.onBack;e.onSaveDraft,e.onAutoSave;var d=(0,r.useState)({}),m=d[0],f=d[1],p=(0,r.useState)(!1);p[0],p[1],(0,eu.pm)().toast;var v=new Date().getFullYear(),h=(0,r.useState)({serialNumber:a.serialNumber||"",manufacturer:a.manufacturer||"",model:a.model||"",yearOfManufacture:a.yearOfManufacture||"",condition:a.condition||"",specifications:a.specifications||""}),b=h[0],g=h[1];(0,r.useEffect)(function(){g({serialNumber:a.serialNumber||"",manufacturer:a.manufacturer||"",model:a.model||"",yearOfManufacture:a.yearOfManufacture||"",condition:a.condition||"",specifications:a.specifications||""})},[a.draftId]);var y=function(e,t){g(function(a){return eN(eN({},a),{},(0,o.Z)({},e,t))})},N=function(){var e={};return(!b.serialNumber||b.serialNumber.length<3)&&(e.serialNumber="Serial number must be at least 3 characters"),(!b.manufacturer||b.manufacturer.length<2)&&(e.manufacturer="Manufacturer must be at least 2 characters"),(!b.model||b.model.length<1)&&(e.model="Model is required"),(!b.yearOfManufacture||isNaN(Number(b.yearOfManufacture))||1980>Number(b.yearOfManufacture)||Number(b.yearOfManufacture)>v)&&(e.yearOfManufacture="Year must be between 1980 and ".concat(v)),b.condition||(e.condition="Condition is required"),(!b.specifications||b.specifications.length<10)&&(e.specifications="Specifications required (min 10 chars)"),f(e),0===Object.keys(e).length},x=(t=(0,n.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N()&&(c(b),s());case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return eg(er,{className:"w-full max-w-2xl mx-auto bg-white/5 backdrop-blur-xl border-white/10"},eg(en,{className:"text-center"},eg(eo,{className:"text-2xl font-bold text-white mb-2"},"Technical Information"),eg(ec,{className:"text-gray-300"},"Please provide the technical details about your device")),eg(ei,null,eg("form",{onSubmit:x,className:"space-y-6"},eg("div",{className:"space-y-4"},eg("div",null,eg(k,{htmlFor:"serialNumber"},"Serial Number"),eg(w,{id:"serialNumber",value:b.serialNumber,onChange:function(e){return y("serialNumber",e.target.value)},placeholder:"Enter the serial number",className:"form-input"}),m.serialNumber&&eg("p",{className:"text-red-500 text-sm mt-1"},m.serialNumber)),eg("div",null,eg(k,{htmlFor:"manufacturer"},"Manufacturer"),eg(w,{id:"manufacturer",value:b.manufacturer,onChange:function(e){return y("manufacturer",e.target.value)},placeholder:"Enter the manufacturer",className:"form-input"}),m.manufacturer&&eg("p",{className:"text-red-500 text-sm mt-1"},m.manufacturer)),eg("div",null,eg(k,{htmlFor:"model"},"Model"),eg(w,{id:"model",value:b.model,onChange:function(e){return y("model",e.target.value)},placeholder:"Enter the model",className:"form-input"}),m.model&&eg("p",{className:"text-red-500 text-sm mt-1"},m.model)),eg("div",null,eg(k,{htmlFor:"yearOfManufacture"},"Year of Manufacture"),eg(w,{id:"yearOfManufacture",value:b.yearOfManufacture,onChange:function(e){return y("yearOfManufacture",e.target.value)},placeholder:"Enter the year of manufacture",className:"form-input"}),m.yearOfManufacture&&eg("p",{className:"text-red-500 text-sm mt-1"},m.yearOfManufacture)),eg("div",null,eg(k,{htmlFor:"condition"},"Condition"),eg(L,{value:b.condition,onValueChange:function(e){return y("condition",e)}},eg(U,{id:"condition",className:"form-select"},eg(_,{placeholder:"Select device condition"})),eg(W,null,["New","Like New","Excellent","Good","Fair","Poor"].map(function(e){return eg(G,{key:e,value:e},e)}))),m.condition&&eg("p",{className:"text-red-500 text-sm mt-1"},m.condition)),eg("div",null,eg(k,{htmlFor:"specifications"},"Technical Specifications"),eg(eb,{id:"specifications",value:b.specifications,onChange:function(e){return y("specifications",e.target.value)},placeholder:"Enter technical specifications",className:"form-input min-h-[100px]"}),m.specifications&&eg("p",{className:"text-red-500 text-sm mt-1"},m.specifications))),eg("div",{className:"flex justify-between pt-6"},eg(l.z,{type:"button",variant:"outline",onClick:u,className:"flex items-center gap-2"},eg(es.Z,{className:"h-4 w-4"}),"Back"),eg(l.z,{type:"submit",className:"flex items-center gap-2 ml-auto"},"Next",eg(el.Z,{className:"h-4 w-4"}))))))}var ew=r.createElement;function eD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eO(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function eS(e){var t,a=e.deviceData,c=e.updateDeviceData,s=e.onNext,u=e.onBack;e.onSaveDraft,e.onAutoSave;var d=(0,r.useState)({}),m=d[0],f=d[1],p=(0,r.useState)(!1);p[0],p[1],(0,eu.pm)().toast;var v=(0,r.useState)({purchasePrice:a.purchasePrice||"",currentValue:a.currentValue||"",expectedRevenue:a.expectedRevenue||"",operationalCosts:a.operationalCosts||""}),h=v[0],b=v[1];(0,r.useEffect)(function(){b({purchasePrice:a.purchasePrice||"",currentValue:a.currentValue||"",expectedRevenue:a.expectedRevenue||"",operationalCosts:a.operationalCosts||""})},[a.draftId]);var g=function(e,t){b(function(a){return eO(eO({},a),{},(0,o.Z)({},e,t))})},y=function(){var e={};return(!h.purchasePrice||isNaN(Number(h.purchasePrice))||0>=Number(h.purchasePrice))&&(e.purchasePrice="Valid purchase price is required"),(!h.currentValue||isNaN(Number(h.currentValue))||0>Number(h.currentValue))&&(e.currentValue="Valid current value is required"),(!h.expectedRevenue||isNaN(Number(h.expectedRevenue))||0>Number(h.expectedRevenue))&&(e.expectedRevenue="Valid expected revenue is required"),(!h.operationalCosts||isNaN(Number(h.operationalCosts))||0>Number(h.operationalCosts))&&(e.operationalCosts="Valid operational costs are required"),f(e),0===Object.keys(e).length},N=(t=(0,n.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),y()&&(c(h),s());case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return ew(er,{className:"w-full max-w-2xl mx-auto bg-white/5 backdrop-blur-xl border-white/10"},ew(en,{className:"text-center"},ew(eo,{className:"text-2xl font-bold text-white mb-2"},"Financial Information"),ew(ec,{className:"text-gray-300"},"Please provide the financial details about your device")),ew(ei,null,ew("form",{onSubmit:N,className:"space-y-6"},ew("div",{className:"space-y-4"},ew("div",null,ew(k,{htmlFor:"purchasePrice"},"Purchase Price (USD)"),ew(w,{id:"purchasePrice",type:"number",value:h.purchasePrice,onChange:function(e){return g("purchasePrice",e.target.value)},placeholder:"Enter purchase price",className:"form-input"}),m.purchasePrice&&ew("p",{className:"text-red-500 text-sm mt-1"},m.purchasePrice)),ew("div",null,ew(k,{htmlFor:"currentValue"},"Current Market Value (USD)"),ew(w,{id:"currentValue",type:"number",value:h.currentValue,onChange:function(e){return g("currentValue",e.target.value)},placeholder:"Enter current market value",className:"form-input"}),m.currentValue&&ew("p",{className:"text-red-500 text-sm mt-1"},m.currentValue)),ew("div",null,ew(k,{htmlFor:"expectedRevenue"},"Expected Annual Revenue (USD)"),ew(w,{id:"expectedRevenue",type:"number",value:h.expectedRevenue,onChange:function(e){return g("expectedRevenue",e.target.value)},placeholder:"Enter expected annual revenue",className:"form-input"}),m.expectedRevenue&&ew("p",{className:"text-red-500 text-sm mt-1"},m.expectedRevenue)),ew("div",null,ew(k,{htmlFor:"operationalCosts"},"Annual Operational Costs (USD)"),ew(w,{id:"operationalCosts",type:"number",value:h.operationalCosts,onChange:function(e){return g("operationalCosts",e.target.value)},placeholder:"Enter annual operational costs",className:"form-input"}),m.operationalCosts&&ew("p",{className:"text-red-500 text-sm mt-1"},m.operationalCosts))),ew("div",{className:"flex justify-between pt-6"},ew(l.z,{type:"button",variant:"outline",onClick:u,className:"flex items-center gap-2"},ew(es.Z,{className:"h-4 w-4"}),"Back"),ew(l.z,{type:"submit",className:"flex items-center gap-2 ml-auto"},"Next",ew(el.Z,{className:"h-4 w-4"}))))))}var eC=a(2278),eP=a(7210),ek=a(4695),ej=r.createElement;function eE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eT(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eE(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function eI(e){var t,a=e.deviceData,c=e.updateDeviceData,s=e.onNext,u=e.onBack;e.onSaveDraft,e.onAutoSave;var d=(0,r.useState)({}),m=d[0];d[1];var f=(0,r.useState)(!1);f[0],f[1],(0,eu.pm)().toast;var p=(0,r.useState)({technicalCertification:a.technicalCertification||null,purchaseProof:a.purchaseProof||null,maintenanceRecords:a.maintenanceRecords||null,deviceImages:a.deviceImages||[]}),v=p[0],h=p[1];(0,r.useEffect)(function(){h({technicalCertification:a.technicalCertification||null,purchaseProof:a.purchaseProof||null,maintenanceRecords:a.maintenanceRecords||null,deviceImages:a.deviceImages||[]})},[a.draftId]);var b=function(e,t){console.log("\uD83D\uDD0D File change:",e,t),h(eT(eT({},v),{},(0,o.Z)({},e,t))),c((0,o.Z)({},e,t))},g=function(e){console.log("\uD83D\uDD0D Images change:",e),h(eT(eT({},v),{},{deviceImages:e})),c({deviceImages:e})},y=(t=(0,n.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c(v),s();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return ej(er,{className:"w-full max-w-2xl mx-auto bg-white/5 backdrop-blur-xl border-white/10"},ej(en,{className:"text-center"},ej(eo,{className:"text-2xl font-bold text-white mb-2"},"Documentation"),ej(ec,{className:"text-gray-300"},"Please upload the required documentation for your device")),ej(ei,null,ej("form",{onSubmit:y,className:"space-y-6"},ej("div",{className:"space-y-4"},ej("div",null,ej(k,{htmlFor:"technicalCertification",className:"flex items-center gap-2"},ej(eC.Z,{className:"h-4 w-4"}),"Technical Certification (PDF)"),ej(w,{id:"technicalCertification",type:"file",accept:".pdf",onChange:function(e){var t;return b("technicalCertification",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"form-input"}),v.technicalCertification&&ej("p",{className:"text-sm text-green-400 mt-1"},"✓ ",v.technicalCertification.name),m.technicalCertification&&ej("p",{className:"text-red-500 text-sm mt-1"},m.technicalCertification)),ej("div",null,ej(k,{htmlFor:"purchaseProof",className:"flex items-center gap-2"},ej(eP.Z,{className:"h-4 w-4"}),"Purchase Proof (PDF)"),ej(w,{id:"purchaseProof",type:"file",accept:".pdf",onChange:function(e){var t;return b("purchaseProof",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"form-input"}),v.purchaseProof&&ej("p",{className:"text-sm text-green-400 mt-1"},"✓ ",v.purchaseProof.name),m.purchaseProof&&ej("p",{className:"text-red-500 text-sm mt-1"},m.purchaseProof)),ej("div",null,ej(k,{htmlFor:"maintenanceRecords",className:"flex items-center gap-2"},ej(eC.Z,{className:"h-4 w-4"}),"Maintenance Records (PDF)"),ej(w,{id:"maintenanceRecords",type:"file",accept:".pdf",onChange:function(e){var t;return b("maintenanceRecords",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"form-input"}),v.maintenanceRecords&&ej("p",{className:"text-sm text-green-400 mt-1"},"✓ ",v.maintenanceRecords.name),m.maintenanceRecords&&ej("p",{className:"text-red-500 text-sm mt-1"},m.maintenanceRecords)),ej("div",null,ej(k,{htmlFor:"deviceImages",className:"flex items-center gap-2"},ej(ek.Z,{className:"h-4 w-4"}),"Device Images (JPG, PNG)"),ej(w,{id:"deviceImages",type:"file",accept:".jpg,.jpeg,.png",multiple:!0,onChange:function(e){return g(Array.from(e.target.files||[]))},className:"form-input"}),v.deviceImages.length>0&&ej("div",{className:"mt-1"},ej("p",{className:"text-sm text-green-400"},"✓ ",v.deviceImages.length," image(s) selected:"),ej("ul",{className:"text-xs text-gray-400 ml-2"},v.deviceImages.map(function(e,t){return ej("li",{key:t},"• ",e.name)}))),m.deviceImages&&ej("p",{className:"text-red-500 text-sm mt-1"},m.deviceImages))),ej("div",{className:"flex justify-between pt-6"},ej(l.z,{type:"button",variant:"outline",onClick:u,className:"flex items-center gap-2"},ej(es.Z,{className:"h-4 w-4"}),"Back"),ej(l.z,{type:"submit",className:"flex items-center gap-2 ml-auto"},"Next",ej(el.Z,{className:"h-4 w-4"}))))))}var eR=a(3368),eZ=a(5584),eM=a(9400),eF=a(5703),eA=a(6022);function eV(){var e=r.useState(void 0),t=(0,eR.Z)(e,2),a=t[0],n=t[1];return r.useEffect(function(){var e=window.matchMedia("(max-width: ".concat(767,"px)")),t=function(){n(window.innerWidth<768)};return e.addEventListener("change",t),n(window.innerWidth<768),function(){return e.removeEventListener("change",t)}},[]),!!a}var ez=r.createElement;function eB(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function eL(e){var t,a,o,c,s,u=e.deviceData,d=e.onNext,m=e.onBack,f=e.onSubmissionSuccess,p=(0,r.useState)(!1),v=p[0],h=p[1],b=(0,r.useState)(!1),g=b[0],y=b[1],N=(0,r.useState)(null),x=N[0],w=N[1],D=(0,r.useState)([]),O=D[0],S=D[1],C=(0,eF.pm)().toast,P=function(e){return!e||isNaN(Number(e))?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e))},k=(t=(0,n.Z)(i().mark(function e(){var t,a,r,n,o,c,s,l,m;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),w(""),S([]),!((t=["deviceName","deviceType","location","serialNumber","manufacturer","model","yearOfManufacture","condition","specifications","purchasePrice","currentValue","expectedRevenue","operationalCosts"].filter(function(e){var t=u[e];return!t||"string"==typeof t&&""===t.trim()})).length>0)){e.next=9;break}return w("Please complete the following fields: ".concat(t.join(", "))),h(!1),e.abrupt("return");case 9:e.prev=9,a=new FormData,(r=localStorage.getItem("currentDraftId"))&&a.append("draftId",r),Object.entries(u).forEach(function(e){var t=(0,eR.Z)(e,2),r=t[0],n=t[1];null!=n&&("string"==typeof n||"number"==typeof n?a.append(r,n.toString()):Array.isArray(n)?n.forEach(function(e,t){e instanceof File&&a.append("".concat(r,"[").concat(t,"]"),e)}):n instanceof File&&a.append(r,n))}),console.log("\uD83D\uDD0D Submitting form data:"),n=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return eB(e,void 0);var a=({}).toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?eB(e,void 0):void 0}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==a.return||a.return()}finally{if(i)throw o}}}}(a.entries());try{for(n.s();!(o=n.n()).done;)s=(c=(0,eR.Z)(o.value,2))[0],l=c[1],console.log("\uD83D\uDD0D ".concat(s,":"),l)}catch(e){n.e(e)}finally{n.f()}return e.next=19,eA.E.submitDevice(a);case 19:if(!(m=e.sent).success){e.next=29;break}localStorage.removeItem("currentDraftId"),console.log("Draft ID cleared after successful submission"),y(!0),C({title:"Success",description:"Your submission has been received"}),f(),d(),e.next=30;break;case 29:throw Error(m.message||"Submission failed");case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(9),console.error("Submission error:",e.t0),400===e.t0.status&&e.t0.errors?(S(e.t0.errors),C({title:"Validation Error",description:"Please check the form for errors",variant:"destructive"})):(w(e.t0.message||"Submission failed. Please try again."),C({title:"Error",description:e.t0.message||"Submission failed. Please try again.",variant:"destructive"}));case 36:return e.prev=36,h(!1),e.finish(36);case 39:case"end":return e.stop()}},e,null,[[9,32,36,39]])})),function(){return t.apply(this,arguments)});return ez("div",{className:"bg-background/90 backdrop-blur-md rounded-lg shadow-lg border border-white/20 p-6"},ez("h2",{className:"text-xl font-medium text-white mb-6"},"Review Information"),(a=["deviceName","deviceType","location","serialNumber","manufacturer","model","yearOfManufacture","condition","specifications","purchasePrice","currentValue","expectedRevenue","operationalCosts"].filter(function(e){var t=u[e];return!t||"string"==typeof t&&""===t.trim()})).length>0?ez("div",{className:"mb-6 p-4 bg-yellow-900/50 border border-yellow-700/50 rounded-lg backdrop-blur-sm"},ez("h3",{className:"text-yellow-200 font-medium mb-2"},"⚠️ Incomplete Form"),ez("p",{className:"text-yellow-300 text-sm"},"Please complete the following fields before submitting: ",ez("strong",null,a.join(", ")))):null,O.length>0&&ez("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-700/50 rounded-lg backdrop-blur-sm"},ez("h3",{className:"text-red-200 font-medium mb-2"},"Please fix the following errors:"),ez("ul",{className:"list-disc list-inside space-y-1"},O.map(function(e,t){return ez("li",{key:t,className:"text-red-300 text-sm"},e.field,": ",e.error)}))),ez("div",{className:"space-y-8"},ez("section",null,ez("h3",{className:"text-lg font-medium text-white mb-3"},"Basic Information"),ez("div",{className:"grid grid-cols-2 gap-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-gray-700/50 p-4 rounded-lg"},ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Device Name"),ez("p",{className:"font-medium text-white"},u.deviceName||"-")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Device Type"),ez("p",{className:"font-medium text-white"},"other"===u.deviceType&&u.customDeviceType?u.customDeviceType:u.deviceType||"-")),ez("div",{className:"col-span-2"},ez("p",{className:"text-sm text-gray-300"},"Location"),ez("p",{className:"font-medium text-white"},u.location||"-")))),ez("section",null,ez("h3",{className:"text-lg font-medium text-white mb-3"},"Technical Information"),ez("div",{className:"grid grid-cols-2 gap-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-gray-700/50 p-4 rounded-lg"},ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Serial Number"),ez("p",{className:"font-medium text-white"},u.serialNumber||"-")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Manufacturer"),ez("p",{className:"font-medium text-white"},u.manufacturer||"-")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Model"),ez("p",{className:"font-medium text-white"},u.model||"-")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Year of Manufacture"),ez("p",{className:"font-medium text-white"},u.yearOfManufacture||"-")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Condition"),ez("p",{className:"font-medium text-white"},u.condition||"-")),ez("div",{className:"col-span-2"},ez("p",{className:"text-sm text-gray-300"},"Technical Specifications"),ez("p",{className:"font-medium text-white whitespace-pre-wrap"},u.specifications||"-")))),ez("section",null,ez("h3",{className:"text-lg font-medium text-white mb-3"},"Financial Information"),ez("div",{className:"grid grid-cols-2 gap-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-gray-700/50 p-4 rounded-lg"},ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Purchase Price"),ez("p",{className:"font-medium ".concat(u.purchasePrice?"text-white":"text-red-400")},u.purchasePrice?P(u.purchasePrice):"Missing")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Current Value"),ez("p",{className:"font-medium ".concat(u.currentValue?"text-white":"text-red-400")},u.currentValue?P(u.currentValue):"Missing")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Expected Annual Revenue"),ez("p",{className:"font-medium ".concat(u.expectedRevenue?"text-white":"text-red-400")},u.expectedRevenue?P(u.expectedRevenue):"Missing")),ez("div",null,ez("p",{className:"text-sm text-gray-300"},"Annual Operational Costs"),ez("p",{className:"font-medium ".concat(u.operationalCosts?"text-white":"text-red-400")},u.operationalCosts?P(u.operationalCosts):"Missing")))),ez("section",null,ez("h3",{className:"text-lg font-medium text-gray-700 mb-3"},"Documentation"),ez("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg"},ez("div",{className:"flex items-center"},ez(eC.Z,{className:"text-[#6366F1] mr-2",size:18}),ez("div",null,ez("p",{className:"font-medium"},"Technical Certification"),ez("p",{className:"text-sm text-gray-500"},(null===(o=u.technicalCertification)||void 0===o?void 0:o.name)||"Not uploaded"))),ez("div",{className:"flex items-center"},ez(eC.Z,{className:"text-[#6366F1] mr-2",size:18}),ez("div",null,ez("p",{className:"font-medium"},"Proof of Purchase"),ez("p",{className:"text-sm text-gray-500"},(null===(c=u.purchaseProof)||void 0===c?void 0:c.name)||"Not uploaded"))),ez("div",{className:"flex items-center"},ez(eC.Z,{className:"text-[#6366F1] mr-2",size:18}),ez("div",null,ez("p",{className:"font-medium"},"Maintenance Records"),ez("p",{className:"text-sm text-gray-500"},(null===(s=u.maintenanceRecords)||void 0===s?void 0:s.name)||"Not uploaded"))),u.deviceImages.length>0&&ez("div",null,ez("div",{className:"flex items-center mb-2"},ez(ek.Z,{className:"text-[#6366F1] mr-2",size:18}),ez("p",{className:"font-medium"},"Device Images")),ez("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-2"},u.deviceImages.map(function(e,t){return ez("div",{key:t,className:"relative aspect-square rounded-lg overflow-hidden"},ez(eM.default,{src:URL.createObjectURL(e),alt:"Device image ".concat(t+1),fill:!0,className:"object-cover"}))})))))),ez("div",{className:"mt-8 pt-4 border-t flex justify-between"},ez(l.z,{type:"button",variant:"outline",onClick:m},"Back"),ez(l.z,{type:"button",className:"bg-[#6366F1] hover:bg-[#5355d1] text-white btn-primary",onClick:k,disabled:v},v?ez(r.Fragment,null,ez("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),eV()?"":"Submitting..."):ez(r.Fragment,null,ez(eZ.Z,{className:"h-4 w-4 mr-2 md:mr-2"}),eV()?"":"Submit for Verification"))),g&&ez("div",{className:"mt-4 text-center text-green-500"},"Submission successful!"),x&&ez("div",{className:"mt-4 text-center text-red-500"},x))}var e_=a(7161),eU=r.createElement;function eq(e){var t=e.showModal,a=void 0!==t&&t,n=(0,r.useState)(!1),o=n[0],c=n[1],i=(0,r.useState)(!1),s=i[0],u=i[1],m=(0,r.useState)({x:0,y:0}),f=m[0],p=m[1],v=(0,r.useRef)(null);return(0,r.useEffect)(function(){a&&!J.hasSeenModal(H.SUCCESS)&&c(!0)},[a]),eU(r.Fragment,null,o&&eU("div",{ref:v},eU(d,{title:"Verification Submitted!",description:"Your device information has been submitted for verification.",showCloseButton:!1},eU("div",{className:"flex flex-col items-center justify-center py-6"},eU(e_.Z,{className:"text-white w-16 h-16 mb-4"}),eU("p",{className:"text-center mb-6"},"We'll review your information and documentation. This process typically takes 1-2 business days.")),eU("div",{className:"flex justify-end"},eU(l.z,{className:"bg-[#6366F1] text-white hover:bg-[#5355d1]",onClick:function(){if(J.markModalAsSeen(H.SUCCESS),v.current){var e=v.current.getBoundingClientRect();p({x:e.left+e.width/2,y:e.top+e.height/2})}c(!1),u(!0)}},"Continue to Dashboard")))),eU(h,{isActive:s,onComplete:function(){u(!1)},x:f.x,y:f.y}),eU("div",{className:"bg-background/90 backdrop-blur-md rounded-lg shadow-lg border border-white/20 p-8 text-center"},eU("div",{className:"flex flex-col items-center justify-center max-w-md mx-auto"},eU("div",{className:"w-16 h-16 rounded-full bg-[#6366F1]/10 flex items-center justify-center mb-6"},eU(e_.Z,{className:"text-[#6366F1] w-8 h-8"})),eU("h2",{className:"text-2xl font-medium text-white mb-4"},"Verification Submitted!"),eU("p",{className:"text-white mb-8"},"Your device information has been submitted for verification. We'll review your information and documentation. This process typically takes 1-2 business days."),eU("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-gray-700/50 rounded-lg p-4 w-full mb-8"},eU("h3",{className:"font-medium text-white mb-2"},"What's Next?"),eU("ul",{className:"text-sm text-white text-left space-y-2"},eU("li",{className:"flex items-start"},eU("span",{className:"text-[#6366F1] mr-2"},"1."),eU("span",null,"Our team will review your device information and documentation")),eU("li",{className:"flex items-start"},eU("span",{className:"text-[#6366F1] mr-2"},"2."),eU("span",null,"You'll receive a notification when the verification is complete")),eU("li",{className:"flex items-start"},eU("span",{className:"text-[#6366F1] mr-2"},"3."),eU("span",null,"Once verified, you can create your investment pool and tokenize your device's revenue")))),eU("div",{className:"flex gap-4"},eU(l.z,{variant:"outline",onClick:function(){return window.location.href="/dashboard"}},"View My Devices"),eU(l.z,{className:"bg-[#6366F1] hover:bg-[#5355d1] text-white",onClick:function(){return window.open("https://home.dobprotocol.com","_blank")}},"Create Pool")))))}var eY=a(200),eW=a(9988);function eG(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var eJ=a(9753),eH=a(4079),e$=a(9094),eX=r.createElement;function eK(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eQ(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eK(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function e0(){var e,t,a,c,s,u,d,m=(0,r.useState)(1),f=m[0],p=m[1],v=(0,r.useState)({deviceName:"",deviceType:"",customDeviceType:"",location:"",serialNumber:"",manufacturer:"",model:"",yearOfManufacture:"",condition:"",specifications:"",purchasePrice:"",currentValue:"",expectedRevenue:"",operationalCosts:"",technicalCertification:null,purchaseProof:null,maintenanceRecords:null,deviceImages:[],draftId:null}),h=v[0],b=v[1],g=(0,r.useState)(!1),y=g[0],N=g[1],x=(0,r.useState)(null),w=x[0],D=x[1],O=(0,r.useState)(!1),S=O[0],C=O[1],P=(0,r.useState)(!1),k=P[0],j=P[1],E=(0,r.useState)(0),T=E[0],I=E[1],R=(0,r.useState)(!1),Z=R[0],M=R[1],F=(0,r.useState)(0),A=F[0],V=F[1],z=(0,r.useState)(null),B=z[0],L=z[1],_=(0,eW.useRouter)(),U=(0,eW.useSearchParams)(),q=(t=(e=(0,r.useState)(!1))[0],a=e[1],c=(0,eu.pm)().toast,{saveDraft:(0,r.useCallback)((s=(0,n.Z)(i().mark(function e(t,r){var n,c,s,l,u,d,m;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a(!0),e.prev=1,c=localStorage.getItem("authToken")){e.next=6;break}throw console.error("❌ No authentication token found"),Error("No authentication token found");case 6:if(console.log("\uD83D\uDD0D Auth token data:",{hasToken:!!(s=JSON.parse(c)).token,walletAddress:s.walletAddress,tokenLength:null===(n=s.token)||void 0===n?void 0:n.length}),s.token){e.next=11;break}throw console.error("❌ Invalid auth token data"),Error("Invalid authentication token");case 11:return l=[],t.technicalCertification&&l.push({filename:t.technicalCertification.name,path:"",documentType:"technical-certification"}),t.purchaseProof&&l.push({filename:t.purchaseProof.name,path:"",documentType:"purchase-proof"}),t.maintenanceRecords&&l.push({filename:t.maintenanceRecords.name,path:"",documentType:"maintenance-records"}),t.deviceImages.forEach(function(e,t){l.push({filename:e.name,path:"",documentType:"device-images"})}),t.deviceName&&"".concat(t.deviceName," - ").concat(t.deviceType||"Device"),console.log("Saving draft with data:",u=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eG(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eG(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({draftId:r},{deviceName:t.deviceName||"",deviceType:t.deviceType||"",location:t.location||"",serialNumber:t.serialNumber||"",manufacturer:t.manufacturer||"",model:t.model||"",yearOfManufacture:t.yearOfManufacture||"",condition:t.condition||"",specifications:t.specifications||"",purchasePrice:t.purchasePrice||"",currentValue:t.currentValue||"",expectedRevenue:t.expectedRevenue||"",operationalCosts:t.operationalCosts||""})),e.next=22,fetch("/api/drafts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(u)});case 22:return d=e.sent,e.next=25,d.json();case 25:if(m=e.sent,d.ok){e.next=29;break}throw console.error("Draft API Error:",{status:d.status,statusText:d.statusText,data:m}),Error(m.error||"Failed to save draft");case 29:return e.abrupt("return",m.draft);case 32:throw e.prev=32,e.t0=e.catch(1),console.error("Error saving draft:",e.t0),e.t0;case 36:return e.prev=36,a(!1),e.finish(36);case 39:case"end":return e.stop()}},e,null,[[1,32,36,39]])})),function(e,t){return s.apply(this,arguments)}),[]),loadDraft:(0,r.useCallback)((u=(0,n.Z)(i().mark(function e(t){var r,n,o,s,l,u;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a(!0),e.prev=1,r=localStorage.getItem("authToken")){e.next=5;break}throw Error("No authentication token found");case 5:return n=JSON.parse(r),console.log("\uD83D\uDD0D Loading draft with ID:",t),o="http://localhost:3001",e.next=10,fetch("".concat(o,"/api/drafts/").concat(t),{headers:{Authorization:"Bearer ".concat(n.token)}});case 10:return s=e.sent,e.next=13,s.json();case 13:if(console.log("\uD83D\uDD0D Backend API response:",l=e.sent),s.ok){e.next=17;break}throw Error(l.error||"Failed to load draft");case 17:if(console.log("\uD83D\uDD0D Found draft:",l.draft),l.draft){e.next=21;break}throw console.log("\uD83D\uDD0D Draft not found"),Error("Draft not found");case 21:return console.log("\uD83D\uDD0D Converted device data:",u={deviceName:l.draft.deviceName||"",deviceType:l.draft.deviceType||"",customDeviceType:"",location:l.draft.location||"",serialNumber:l.draft.serialNumber||"",manufacturer:l.draft.manufacturer||"",model:l.draft.model||"",yearOfManufacture:l.draft.yearOfManufacture||"",condition:l.draft.condition||"",specifications:l.draft.specifications||"",purchasePrice:l.draft.purchasePrice||"",currentValue:l.draft.currentValue||"",expectedRevenue:l.draft.expectedRevenue||"",operationalCosts:l.draft.operationalCosts||"",technicalCertification:null,purchaseProof:null,maintenanceRecords:null,deviceImages:[]}),c({title:"Draft Loaded",description:"Draft loaded successfully. Please re-upload any files."}),e.abrupt("return",u);case 27:return e.prev=27,e.t0=e.catch(1),console.error("Error loading draft:",e.t0),c({title:"Error",description:e.t0.message||"Failed to load draft",variant:"destructive"}),e.abrupt("return",null);case 32:return e.prev=32,a(!1),e.finish(32);case 35:case"end":return e.stop()}},e,null,[[1,27,32,35]])})),function(e){return u.apply(this,arguments)}),[c]),getDrafts:(0,r.useCallback)((0,n.Z)(i().mark(function e(){var t,r,n,o;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a(!0),e.prev=1,t=localStorage.getItem("authToken")){e.next=5;break}throw Error("No authentication token found");case 5:return r=JSON.parse(t),e.next=8,fetch("/api/drafts",{headers:{Authorization:"Bearer ".concat(r.token)}});case 8:return n=e.sent,e.next=11,n.json();case 11:if(o=e.sent,n.ok){e.next=14;break}throw Error(o.error||"Failed to load drafts");case 14:return e.abrupt("return",o.drafts);case 17:return e.prev=17,e.t0=e.catch(1),console.error("Error loading drafts:",e.t0),c({title:"Error",description:e.t0.message||"Failed to load drafts",variant:"destructive"}),e.abrupt("return",[]);case 22:return e.prev=22,a(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[1,17,22,25]])})),[c]),loading:t}),Y=q.saveDraft,W=q.loadDraft,G=q.loading,J=(0,eu.pm)().toast;(0,r.useEffect)(function(){var e=U.get("edit");console.log("\uD83D\uDD0D Checking for edit mode, editId:",e),e?(console.log("\uD83D\uDD0D Edit mode detected, loading draft:",e),C(!0),W(e).then(function(t){if(console.log("\uD83D\uDD0D Loaded draft data:",t),t){var a=eQ(eQ(eQ({},{deviceName:"",deviceType:"",customDeviceType:"",location:"",serialNumber:"",manufacturer:"",model:"",yearOfManufacture:"",condition:"",specifications:"",purchasePrice:"",currentValue:"",expectedRevenue:"",operationalCosts:"",technicalCertification:null,purchaseProof:null,maintenanceRecords:null,deviceImages:[],draftId:null}),t),{},{draftId:e});console.log("\uD83D\uDD0D Setting device data to:",a),b(a),D(e),V(function(e){return e+1}),J({title:"Draft Loaded",description:"Your draft has been loaded. Please re-upload any files."})}C(!1)}).catch(function(e){console.error("\uD83D\uDD0D Error loading draft:",e),C(!1)})):(console.log("\uD83D\uDD0D No edit mode - creating new project with clean slate"),D(null),b({deviceName:"",deviceType:"",customDeviceType:"",location:"",serialNumber:"",manufacturer:"",model:"",yearOfManufacture:"",condition:"",specifications:"",purchasePrice:"",currentValue:"",expectedRevenue:"",operationalCosts:"",technicalCertification:null,purchaseProof:null,maintenanceRecords:null,deviceImages:[],draftId:null}),M(!1),I(0))},[U,W,J]);var H=(0,r.useCallback)(function(e){b(function(t){return eQ(eQ({},t),e)})},[]),$=(d=(0,n.Z)(i().mark(function e(t){var a,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\uD83D\uDD0D Saving draft with ID:",w),console.log("\uD83D\uDD0D Current device data:",a=t?eQ(eQ({},h),t):h),console.log("\uD83D\uDD0D Device data fields:",{deviceName:a.deviceName,deviceType:a.deviceType,location:a.location,serialNumber:a.serialNumber,manufacturer:a.manufacturer,model:a.model,yearOfManufacture:a.yearOfManufacture,condition:a.condition,specifications:a.specifications,purchasePrice:a.purchasePrice,currentValue:a.currentValue,expectedRevenue:a.expectedRevenue,operationalCosts:a.operationalCosts}),e.next=7,Y(a,w||void 0);case 7:console.log("\uD83D\uDD0D Save response:",r=e.sent),!w&&r&&(console.log("\uD83D\uDD0D Setting new draft ID:",r.id),D(r.id)),I(0),Z||(M(!0),J({title:"Draft Saved",description:"Your progress has been automatically saved."})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("\uD83D\uDD0D Error in handleSaveDraft:",e.t0),I(function(e){return e+1});case 18:case"end":return e.stop()}},e,null,[[0,14]])})),function(e){return d.apply(this,arguments)}),X=(0,r.useCallback)(function(){B&&clearTimeout(B),L(setTimeout(function(){(h.deviceName||h.deviceType||h.location)&&y&&T<3&&$()},2e3))},[h,y,T,$]);(0,r.useEffect)(function(){return function(){B&&clearTimeout(B)}},[B]),(0,r.useEffect)(function(){var e=localStorage.getItem("stellarWallet");N(!!e),e&&p(1);var t=function(){var e=localStorage.getItem("stellarWallet");N(!!e),e&&p(1)};return window.addEventListener("walletStateChange",t),function(){return window.removeEventListener("walletStateChange",t)}},[]);var K=function(){f<6&&($(),p(function(e){return e+1}))},Q=function(){f>1&&($(),p(f-1))},ee=function(e){(6!==e||k)&&e>=1&&e<=6&&e!==f&&p(e)},et=function(){j(!0),setTimeout(function(){_.push("/dashboard")},2e3)};return y?S?eX("div",{className:"flex flex-col items-center justify-center min-h-[60vh]"},eX(eJ.Z,{className:"h-8 w-8 animate-spin text-primary mb-4"}),eX("p",{className:"text-muted-foreground"},"Loading your draft...")):eX(r.Fragment,null,eX("div",{className:"min-h-screen py-8 px-4"},eX("div",{className:"container mx-auto"},eX("div",{className:"flex justify-end items-center mb-8 gap-4"},eX("div",{className:"flex items-center space-x-2"},eX(l.z,{onClick:function(){var e=new Blob([["=== DOB VALIDATOR - DEVICE VERIFICATION FORM ===\n","STEP 1: BASIC INFORMATION","1. Device Name: "+(h.deviceName||"Not provided"),"2. Device Type: "+(h.deviceType||"Not provided"),"3. Location: "+(h.location||"Not provided"),"\nSTEP 2: TECHNICAL INFORMATION","4. Year of Manufacture: "+(h.yearOfManufacture||"Not provided"),"5. Condition: "+(h.condition||"Not provided"),"6. Specifications: "+(h.specifications||"Not provided"),"\nSTEP 3: FINANCIAL INFORMATION","7. Purchase Price: "+(h.purchasePrice||"Not provided"),"8. Current Value: "+(h.currentValue||"Not provided"),"9. Expected Revenue: "+(h.expectedRevenue||"Not provided"),"10. Operational Costs: "+(h.operationalCosts||"Not provided"),"\nSTEP 4: DOCUMENTATION","11. Technical Certification: "+(h.technicalCertification?"Uploaded":"Not uploaded"),"12. Purchase Proof: "+(h.purchaseProof?"Uploaded":"Not uploaded"),"13. Maintenance Records: "+(h.maintenanceRecords?"Uploaded":"Not uploaded"),"14. Device Images: "+(h.deviceImages.length>0?"".concat(h.deviceImages.length," images uploaded"):"No images uploaded"),"\n=== END OF FORM ==="].join("\n")],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="dob-validator-form-questions.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),J({title:"Form Downloaded",description:"Your form questions have been downloaded as a text file."})},variant:"outline",size:"sm",className:"gap-2"},eX(eH.Z,{className:"h-4 w-4"}),"Download Form"),f<5&&eX(l.z,{onClick:function(){return $()},disabled:G,variant:"outline",size:"sm",className:"gap-2"},G?eX(eJ.Z,{className:"h-4 w-4 animate-spin"}):eX(e$.Z,{className:"h-4 w-4"}),w?"Update Draft":"Save Draft"))),eX(function(){return eX("div",{className:"flex justify-center items-center space-x-2 mb-8"},Array.from({length:6}).map(function(e,t){return 5!==t||k?eX("div",{key:t,className:"flex items-center"},eX("button",{onClick:function(){return ee(t+1)},className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-300 hover:scale-110 ".concat(t+1===f?"bg-primary text-primary-foreground shadow-lg ring-2 ring-primary/20":t+1<f?"bg-primary/20 text-primary border-2 border-primary hover:bg-primary/30":"bg-muted text-muted-foreground border-2 border-muted hover:bg-muted/80 hover:border-primary/50")},t+1),t<5&&eX("div",{className:"h-1 w-12 transition-all duration-500 ease-in-out ".concat(t+1<f?"bg-primary":t+1===f?"bg-gradient-to-r from-primary to-muted":"bg-muted")})):null}))},null),eX("div",{className:"max-w-4xl mx-auto"},eX(function(){return eX("div",{className:"space-y-8"},eX("div",{className:"transition-opacity duration-300 ".concat(f>=1?"opacity-100":"opacity-50")},eX(ep,{key:"basic-".concat(w||"new","-").concat(A),deviceData:h,updateDeviceData:H,onNext:K,onSaveDraft:$,onAutoSave:X})),eX("div",{className:"transition-opacity duration-300 ".concat(f>=2?"opacity-100":"opacity-50")},eX(ex,{key:"technical-".concat(w||"new","-").concat(A),deviceData:h,updateDeviceData:H,onNext:K,onBack:Q,onSaveDraft:$,onAutoSave:X})),eX("div",{className:"transition-opacity duration-300 ".concat(f>=3?"opacity-100":"opacity-50")},eX(eS,{key:"financial-".concat(w||"new","-").concat(A),deviceData:h,updateDeviceData:H,onNext:K,onBack:Q,onSaveDraft:$,onAutoSave:X})),eX("div",{className:"transition-opacity duration-300 ".concat(f>=4?"opacity-100":"opacity-50")},eX(eI,{key:"documentation-".concat(w||"new","-").concat(A),deviceData:h,updateDeviceData:H,onNext:K,onBack:Q,onSaveDraft:$,onAutoSave:X})),eX("div",{className:"transition-opacity duration-300 ".concat(f>=5?"opacity-100":"opacity-50")},eX(eL,{key:"review-".concat(w||"new","-").concat(A),deviceData:h,onNext:K,onBack:Q,onSubmissionSuccess:et})),k&&eX("div",{className:"w-full max-w-2xl mx-auto p-8 bg-card/50 backdrop-blur-sm rounded-lg border border-border/50"},eX(eq,null)))},null))))):eX("div",{className:"flex flex-col items-center justify-center min-h-[60vh]"},eX(eY.U,null))}var e1=r.createElement;function e2(){return e1("div",{className:"w-full mt-20 min-h-screen pb-20 form-page"},e1(r.Suspense,{fallback:e1("div",null,"Loading...")},e1(e0,null)))}},16:function(e,t,a){"use strict";a.d(t,{pm:function(){return y}});var r=a(3368),n=a(3997),o=a(7932),c=a(317),i=a(4762),s=a(8232);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach(function(t){(0,i.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d=0,m=new Map,f=function(e){if(!m.has(e)){var t=setTimeout(function(){m.delete(e),b({type:"REMOVE_TOAST",toastId:e})},5e3);m.set(e,t)}},p=function(e,t){switch(t.type){case"ADD_TOAST":return u(u({},e),{},{toasts:[t.toast].concat((0,c.Z)(e.toasts)).slice(0,1)});case"UPDATE_TOAST":return u(u({},e),{},{toasts:e.toasts.map(function(e){return e.id===t.toast.id?u(u({},e),t.toast):e})});case"DISMISS_TOAST":var a=t.toastId;return a?f(a):e.toasts.forEach(function(e){f(e.id)}),u(u({},e),{},{toasts:e.toasts.map(function(e){return e.id===a||void 0===a?u(u({},e),{},{open:!1}):e})});case"REMOVE_TOAST":if(void 0===t.toastId)return u(u({},e),{},{toasts:[]});return u(u({},e),{},{toasts:e.toasts.filter(function(e){return e.id!==t.toastId})})}},v=[],h={toasts:[]};function b(e){h=p(h,e),v.forEach(function(e){e(h)})}function g(e){var t=(0,o.Z)({},((0,n.Z)(e),e)),a=(d=(d+1)%Number.MAX_SAFE_INTEGER).toString(),r=function(){return b({type:"DISMISS_TOAST",toastId:a})};return b({type:"ADD_TOAST",toast:u(u({},t),{},{id:a,open:!0,onOpenChange:function(e){e||r()}})}),{id:a,dismiss:r,update:function(e){return b({type:"UPDATE_TOAST",toast:u(u({},e),{},{id:a})})}}}function y(){var e=s.useState(h),t=(0,r.Z)(e,2),a=t[0],n=t[1];return s.useEffect(function(){return v.push(n),function(){var e=v.indexOf(n);e>-1&&v.splice(e,1)}},[a]),u(u({},a),{},{toast:g,dismiss:function(e){return b({type:"DISMISS_TOAST",toastId:e})}})}}},function(e){e.O(0,[650,144,33,219,400,347,537,786,788,200,638,333,744],function(){return e(e.s=8019)}),_N_E=e.O()}]);