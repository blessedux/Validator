(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{7769:function(e,t,r){Promise.resolve().then(r.bind(r,4233))},4233:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var o=r(4762),a=r(4964),n=r(8232),i=r(5646),s=r.n(i),l=r(9988),c=r(9400);let u=n.forwardRef(function(e,t){let{title:r,titleId:o,...a}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},a),r?n.createElement("title",{id:o},r):null,n.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}),d=n.forwardRef(function(e,t){let{title:r,titleId:o,...a}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},a),r?n.createElement("title",{id:o},r):null,n.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))});var m=r(2572),f=r(5703),p=r(4404),b=r(6022),g=n.createElement;function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(){var e,t=(0,l.useRouter)(),r=(0,f.pm)().toast,i=(0,n.useRef)(null),h=(0,n.useState)(null),y=h[0],x=h[1],w=(0,n.useState)(!1),D=w[0],N=w[1],k=(0,n.useState)(!0),O=k[0],P=k[1],S=(0,n.useState)({name:"",company:"",email:""}),E=S[0],A=S[1],j=(0,n.useState)({name:"",company:"",email:""}),T=j[0],I=j[1],C=(0,n.useState)(null),Z=C[0],R=C[1],_=(0,n.useState)(null),M=_[0],U=_[1],F=(0,n.useState)(!1),L=F[0],q=F[1],W=(0,n.useState)(!1);W[0],W[1];var z=(0,n.useState)({}),B=z[0],G=z[1],V=function(){if(!D)return!0;var e=E.name!==T.name||E.company!==T.company||E.email!==T.email,t=Z!==M;return e||t};(0,n.useEffect)(function(){var e;(e=(0,a.Z)(s().mark(function e(){var r,o,a,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("stellarPublicKey")){e.next=4;break}return t.push("/"),e.abrupt("return");case 4:if(x(r),o=localStorage.getItem("authToken")){e.next=9;break}return t.push("/"),e.abrupt("return");case 9:return e.prev=9,JSON.parse(o),e.next=13,b.E.getProfile();case 13:console.log("✅ Existing profile found:",a=e.sent),A(n={name:a.profile.name||"",company:a.profile.company||"",email:a.profile.email||""}),I(n),a.profile.profileImage&&(R(a.profile.profileImage),U(a.profile.profileImage)),N(!0),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),console.log("ℹ️ No existing profile found, creating new one"),N(!1);case 26:return e.prev=26,P(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[9,22,26,29]])})),function(){return e.apply(this,arguments)})()},[t]);var J=function(){var e={};return E.name.trim()||(e.name="Name is required"),E.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)||(e.email="Please enter a valid email address"):e.email="Email is required",E.company.trim()||(e.company="Company/Project name is required"),G(e),0===Object.keys(e).length},Y=(e=(0,a.Z)(s().mark(function e(o){var a,n,i,l,c;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),console.log("\uD83D\uDD0D Profile: Form submission started"),console.log("\uD83D\uDD0D Profile: Form data:",E),console.log("\uD83D\uDD0D Profile: Is edit mode:",D),console.log("\uD83D\uDD0D Profile: Wallet address:",y),J()){e.next=8;break}return console.log("❌ Profile: Form validation failed"),e.abrupt("return");case 8:if(q(!0),e.prev=9,i=localStorage.getItem("authToken")){e.next=13;break}throw Error("No authentication token found");case 13:return JSON.parse(i),console.log("\uD83D\uDD0D Profile: Auth token parsed successfully"),console.log("\uD83D\uDD0D Profile: Using method:",D?"PUT":"POST"),console.log("\uD83D\uDD0D Profile: Request body:",{name:E.name,company:E.company,email:E.email,profileImage:Z}),e.next=21,b.E.createProfile({name:E.name,company:E.company,email:E.email});case 21:return l=e.sent,console.log("✅ Profile ".concat(D?"updated":"created"," successfully:"),l),c=v(v({},E),{},{walletAddress:y,profileImage:Z,createdAt:(null===(a=l.profile)||void 0===a?void 0:a.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),id:null===(n=l.profile)||void 0===n?void 0:n.id}),localStorage.setItem("userProfile",JSON.stringify(c)),console.log("✅ Profile: Local storage updated"),console.log("\uD83D\uDD0D Profile: Testing immediate profile retrieval..."),e.prev=27,e.next=30,b.E.getProfile();case 30:console.log("✅ Profile: Immediate retrieval test successful:",e.sent),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(27),console.error("❌ Profile: Immediate retrieval test failed:",e.t0);case 37:console.log("\uD83D\uDD14 Profile: Attempting to show toast notification...");try{r({title:"Profile Created Successfully!",description:"Your profile has been created successfully. Redirecting to dashboard..."}),console.log("✅ Profile: Toast notification called successfully")}catch(e){console.error("❌ Profile: Toast notification failed:",e)}setTimeout(function(){t.push("/dashboard")},1e3),e.next=46;break;case 42:e.prev=42,e.t1=e.catch(9),console.error("❌ Error ".concat(D?"updating":"saving"," profile:"),e.t1),G({submit:e.t1 instanceof Error?e.t1.message:"Failed to ".concat(D?"update":"save"," profile. Please try again.")});case 46:return e.prev=46,q(!1),e.finish(46);case 49:case"end":return e.stop()}},e,null,[[9,42,46,49],[27,34]])})),function(t){return e.apply(this,arguments)}),$=function(e){var t=e.target,r=t.name,a=t.value;A(function(e){return v(v({},e),{},(0,o.Z)({},r,a))}),B[r]&&G(function(e){return v(v({},e),{},(0,o.Z)({},r,""))})};return!y||O?g("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8"},g("div",{className:"max-w-md mx-auto backdrop-blur-md rounded-xl shadow-lg p-8 border border-white/20"},g("div",{className:"text-center"},g("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),g("p",{className:"mt-4 text-muted-foreground"},"Loading profile...")))):g(m.a,null,g("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8"},g("div",{className:"max-w-md mx-auto mt-8 backdrop-blur-md rounded-xl shadow-lg p-8 border border-white/20 relative"},D&&g("button",{onClick:function(){return t.push("/dashboard")},className:"absolute top-4 right-4 p-2 rounded-full bg-background/20 backdrop-blur-sm border border-white/30 hover:bg-background/30 transition-colors duration-200",title:"Close and return to dashboard"},g(p.Z,{className:"w-5 h-5 text-foreground"})),g("div",{className:"text-center mb-8"},g("div",{className:"flex justify-center mb-6"},g("div",{onClick:function(){var e;null===(e=i.current)||void 0===e||e.click()},className:"relative w-24 h-24 rounded-full overflow-hidden bg-muted/50 border-4 border-muted-foreground/20 cursor-pointer group hover:border-primary/50 transition-colors duration-200"},Z?g(c.default,{src:Z,alt:"Profile",fill:!0,className:"object-cover"}):g(u,{className:"w-full h-full text-muted-foreground"}),g("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity duration-200 flex items-center justify-center"},g(d,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"}))),g("input",{type:"file",ref:i,onChange:function(e){var t,r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(!r.type.startsWith("image/")){G(function(e){return v(v({},e),{},{image:"Please select an image file"})});return}if(r.size>5242880){G(function(e){return v(v({},e),{},{image:"Image size should be less than 5MB"})});return}R(URL.createObjectURL(r)),G(function(e){return v(v({},e),{},{image:""})})}},accept:"image/*",className:"hidden","aria-label":"Upload profile image",title:"Upload profile image"})),B.image&&g("p",{className:"text-sm text-destructive mt-2"},B.image),g("h2",{className:"text-3xl font-bold text-foreground"},D?"Edit Your Profile":"Create Your Profile"),g("p",{className:"mt-3 text-sm text-muted-foreground"},D?"Update your profile information below":"Please provide your information to get started")),g("form",{onSubmit:Y,className:"space-y-8"},g("div",null,g("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-3"},"Full Name"),g("input",{type:"text",name:"name",id:"name",required:!0,value:E.name,onChange:$,className:"block w-full rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-background/20 backdrop-blur-sm border border-white/30 px-4 py-3 ".concat(B.name?"border-destructive":""),placeholder:"John Doe"}),B.name&&g("p",{className:"mt-2 text-sm text-destructive"},B.name)),g("div",null,g("label",{htmlFor:"company",className:"block text-sm font-medium text-foreground mb-3"},"Company/Project Name"),g("input",{type:"text",name:"company",id:"company",required:!0,value:E.company,onChange:$,className:"block w-full rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-background/20 backdrop-blur-sm border border-white/30 px-4 py-3 ".concat(B.company?"border-destructive":""),placeholder:"Acme Inc."}),B.company&&g("p",{className:"mt-2 text-sm text-destructive"},B.company)),g("div",null,g("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-3"},"Email Address"),g("input",{type:"email",name:"email",id:"email",required:!0,value:E.email,onChange:$,className:"block w-full rounded-lg shadow-sm focus:ring-primary focus:border-primary sm:text-sm bg-background/20 backdrop-blur-sm border border-white/30 px-4 py-3 ".concat(B.email?"border-destructive":""),placeholder:"john@example.com"}),B.email&&g("p",{className:"mt-2 text-sm text-destructive"},B.email)),g("div",{className:"bg-background/10 backdrop-blur-sm p-6 rounded-lg border border-white/10"},g("p",{className:"text-sm text-muted-foreground"},"Your personal information is fully encrypted and stored securely. We take your privacy seriously and will never share your data with third parties.")),B.submit&&g("div",{className:"bg-destructive/10 backdrop-blur-sm p-4 rounded-lg border border-destructive/20"},g("p",{className:"text-sm text-destructive"},B.submit)),g("button",{type:"submit",disabled:L||D&&!V(),className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-lg shadow-sm text-sm font-medium transition-all duration-300 ".concat(D&&!V()?"text-gray-400 bg-gray-200 cursor-not-allowed":D?"text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500":"text-primary-foreground bg-primary hover:bg-primary/90 focus:ring-primary"," focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50")},L?g("span",{className:"flex items-center"},g("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},g("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),D?"Updating Profile...":"Creating Profile..."):D?"Update Profile":"Create Profile")))))}},2572:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var o=r(8232),a=r(9988),n=r(8788),i=o.createElement;function s(e){var t=e.children,r=e.fallback,s=(0,a.useRouter)(),l=(0,o.useState)(!1),c=l[0],u=l[1],d=(0,o.useState)(!0),m=d[0],f=d[1];return((0,o.useEffect)(function(){!function(){console.log("\uD83D\uDD12 AuthGuard: Checking authentication...");var e=(0,n.$8)();if(console.log("\uD83D\uDD12 AuthGuard: isAuthenticated =",e),!e){console.log("❌ AuthGuard: User not authenticated, redirecting to home"),s.push("/");return}console.log("✅ AuthGuard: User authenticated"),u(!0),f(!1)}()},[s]),m)?r||i("div",{className:"min-h-screen bg-background flex items-center justify-center"},i("div",{className:"text-center"},i("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),i("p",{className:"mt-4 text-muted-foreground"},"Checking authentication..."))):c?i(o.Fragment,null,t):null}},5703:function(e,t,r){"use strict";r.d(t,{pm:function(){return y}});var o=r(3368),a=r(3997),n=r(7932),i=r(317),s=r(4762),l=r(8232);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=0,m=new Map,f=function(e){if(!m.has(e)){var t=setTimeout(function(){m.delete(e),h({type:"REMOVE_TOAST",toastId:e})},1e6);m.set(e,t)}},p=function(e,t){switch(t.type){case"ADD_TOAST":return u(u({},e),{},{toasts:[t.toast].concat((0,i.Z)(e.toasts)).slice(0,1)});case"UPDATE_TOAST":return u(u({},e),{},{toasts:e.toasts.map(function(e){return e.id===t.toast.id?u(u({},e),t.toast):e})});case"DISMISS_TOAST":var r=t.toastId;return r?f(r):e.toasts.forEach(function(e){f(e.id)}),u(u({},e),{},{toasts:e.toasts.map(function(e){return e.id===r||void 0===r?u(u({},e),{},{open:!1}):e})});case"REMOVE_TOAST":if(void 0===t.toastId)return u(u({},e),{},{toasts:[]});return u(u({},e),{},{toasts:e.toasts.filter(function(e){return e.id!==t.toastId})})}},b=[],g={toasts:[]};function h(e){g=p(g,e),b.forEach(function(e){e(g)})}function v(e){var t=(0,n.Z)({},((0,a.Z)(e),e)),r=(d=(d+1)%Number.MAX_SAFE_INTEGER).toString(),o=function(){return h({type:"DISMISS_TOAST",toastId:r})};return h({type:"ADD_TOAST",toast:u(u({},t),{},{id:r,open:!0,onOpenChange:function(e){e||o()}})}),{id:r,dismiss:o,update:function(e){return h({type:"UPDATE_TOAST",toast:u(u({},e),{},{id:r})})}}}function y(){var e=l.useState(g),t=(0,o.Z)(e,2),r=t[0],a=t[1];return l.useEffect(function(){return b.push(a),function(){var e=b.indexOf(a);e>-1&&b.splice(e,1)}},[r]),u(u({},r),{},{toast:v,dismiss:function(e){return h({type:"DISMISS_TOAST",toastId:e})}})}},7172:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var o=r(8232);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...m}=e;return(0,o.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:l?24*Number(s)/Number(a):s,className:n("lucide",c),...m},[...d.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,o.forwardRef)((r,i)=>{let{className:l,...c}=r;return(0,o.createElement)(s,{ref:i,iconNode:t,className:n("lucide-".concat(a(e)),l),...c})});return r.displayName="".concat(e),r}},4404:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});let o=(0,r(7172).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[650,33,400,788,638,333,744],function(){return e(e.s=7769)}),_N_E=e.O()}]);